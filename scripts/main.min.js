/*! yammertime - v1.0.0 | Licensed under MIT */

this.Yt=this.Yt||{},this.Yt.Templates=this.Yt.Templates||{},this.Yt.Templates.message=Handlebars.template({1:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression,j=this.lambda;return'    <div class="'+(null!=(e=b.unless.call(a,null!=a?a.replied_to_id:a,{name:"unless",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+" "+(null!=(e=b["if"].call(a,null!=a?a.replied_to_id:a,{name:"if",hash:{},fn:this.program(4,d,0),inverse:this.noop,data:d}))?e:"")+'" id="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:g,typeof f===h?f.call(a,{name:"id",hash:{},data:d}):f))+'">\n        <div class="userimg"><img src="'+i(j(null!=a?a.mugshot_url:a,a))+'" height="96" width="96"/></div>\n\n        <div class="content">\n            <div class="sender">\n                <a '+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="https://www.yammer.com/users/'+i((f=null!=(f=b.username||(null!=a?a.username:a))?f:g,typeof f===h?f.call(a,{name:"username",hash:{},data:d}):f))+'">\n                    '+i((f=null!=(f=b.full_name||(null!=a?a.full_name:a))?f:g,typeof f===h?f.call(a,{name:"full_name",hash:{},data:d}):f))+"\n                </a>\n"+(null!=(e=b["if"].call(a,null!=a?a.replied_to_id:a,{name:"if",hash:{},fn:this.program(6,d,0),inverse:this.noop,data:d}))?e:"")+'            </div>\n\n            <div class="message">\n                <span class="messagebody">'+(null!=(e=j(null!=(e=null!=a?a.body:a)?e.rich:e,a))?e:"")+"\n"+(null!=(e=b.each.call(a,null!=a?a.attachments:a,{name:"each",hash:{},fn:this.program(8,d,0),inverse:this.noop,data:d}))?e:"")+"                </span>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.attachments:a,{name:"if",hash:{},fn:this.program(13,d,0),inverse:this.noop,data:d}))?e:"")+"            </div>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.thread_id:a,{name:"if",hash:{},fn:this.program(22,d,0),inverse:this.noop,data:d}))?e:"")+'\n            <div class="metadata">\n                <span class="messageinfo">Posted <a '+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="'+i((f=null!=(f=b.web_url||(null!=a?a.web_url:a))?f:g,typeof f===h?f.call(a,{name:"web_url",hash:{},data:d}):f))+'" target="_blank" class="creationdate unformatted" data-time="'+i((f=null!=(f=b.created_at||(null!=a?a.created_at:a))?f:g,typeof f===h?f.call(a,{name:"created_at",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.created_at||(null!=a?a.created_at:a))?f:g,typeof f===h?f.call(a,{name:"created_at",hash:{},data:d}):f))+"</a> "+(null!=(e=b["if"].call(a,null!=a?a.group_name:a,{name:"if",hash:{},fn:this.program(25,d,0),inverse:this.noop,data:d}))?e:"")+"</a>\n                </span>\n            </div>\n\n"+(null!=(e=b["if"].call(a,null!=(e=null!=a?a.liked_by:a)?e.count:e,{name:"if",hash:{},fn:this.program(27,d,0),inverse:this.noop,data:d}))?e:"")+"        </div>\n    </div>\n"},2:function(a,b,c,d){return"yam"},4:function(a,b,c,d){return"yam reply"},6:function(a,b,c,d){var e;return'                    <span class="in_reply_to"> in reply to '+this.escapeExpression((e=null!=(e=b.in_reply_to||(null!=a?a.in_reply_to:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"in_reply_to",hash:{},data:d}):e))+"</span>\n"},8:function(a,b,c,d){var e;return(null!=(e=b["if"].call(a,null!=a?a.body:a,{name:"if",hash:{},fn:this.program(9,d,0),inverse:this.noop,data:d}))?e:"")+(null!=(e=b["if"].call(a,null!=a?a.praised_user_ids:a,{name:"if",hash:{},fn:this.program(11,d,0),inverse:this.noop,data:d}))?e:"")},9:function(a,b,c,d){var e;return'                            <span class="repost">'+(null!=(e=this.lambda(null!=(e=null!=a?a.body:a)?e.plain:e,a))?e:"")+"</span>\n"},11:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                            <div class="praised">\n                                <span>'+h((e=null!=(e=b.description||(null!=a?a.description:a))?e:f,typeof e===g?e.call(a,{name:"description",hash:{},data:d}):e))+'</span>\n                                <span class="praise '+h((e=null!=(e=b.icon||(null!=a?a.icon:a))?e:f,typeof e===g?e.call(a,{name:"icon",hash:{},data:d}):e))+'"><em>'+h((e=null!=(e=b.comment||(null!=a?a.comment:a))?e:f,typeof e===g?e.call(a,{name:"comment",hash:{},data:d}):e))+"</em></span>\n                            </div>\n"},13:function(a,b,c,d){var e;return'                    <div class="attachments">\n'+(null!=(e=b.each.call(a,null!=a?a.attachments:a,{name:"each",hash:{},fn:this.program(14,d,0),inverse:this.noop,data:d}))?e:"")+"                    </div>\n"},14:function(a,b,c,d){var e;return(null!=(e=b["if"].call(a,null!=a?a.image:a,{name:"if",hash:{},fn:this.program(15,d,0),inverse:this.noop,data:d}))?e:"")+"\n"+(null!=(e=b["if"].call(a,null!=a?a.file:a,{name:"if",hash:{},fn:this.program(17,d,0),inverse:this.noop,data:d}))?e:"")+"\n"+(null!=(e=b["if"].call(a,null!=a?a.ymodule:a,{name:"if",hash:{},fn:this.program(19,d,0),inverse:this.noop,data:d}))?e:"")},15:function(a,b,c,d){var e;return'                                <img class="attachment" src="'+this.escapeExpression(this.lambda(null!=(e=null!=a?a.image:a)?e.url:e,a))+'">\n'},17:function(a,b,c,d){var e,f,g=this.escapeExpression,h=b.helperMissing,i="function";return'                                <div class="document clr">\n                                    <span class="item"><a href="'+g(this.lambda(null!=(e=null!=a?a.file:a)?e.url:e,a))+'"><img src="'+g((f=null!=(f=b.large_icon_url||(null!=a?a.large_icon_url:a))?f:h,typeof f===i?f.call(a,{name:"large_icon_url",hash:{},data:d}):f))+'" /><span class="download">Download</span></a></span>\n                                    <span class="name">'+g((f=null!=(f=b.full_name||(null!=a?a.full_name:a))?f:h,typeof f===i?f.call(a,{name:"full_name",hash:{},data:d}):f))+"</span>\n                                </div>\n"},19:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'                                <div class="document clr">\n'+(null!=(e=b["if"].call(a,null!=a?a.thumbnail_url:a,{name:"if",hash:{},fn:this.program(20,d,0),inverse:this.noop,data:d}))?e:"")+'                                    <span class="name clr"><a href="'+i((f=null!=(f=b.web_url||(null!=a?a.web_url:a))?f:g,typeof f===h?f.call(a,{name:"web_url",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+"</a></span>\n                                </div>\n"},20:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                                    <span class="item clr"><a href="'+h((e=null!=(e=b.web_url||(null!=a?a.web_url:a))?e:f,typeof e===g?e.call(a,{name:"web_url",hash:{},data:d}):e))+'"><img src="'+h((e=null!=(e=b.thumbnail_url||(null!=a?a.thumbnail_url:a))?e:f,typeof e===g?e.call(a,{name:"thumbnail_url",hash:{},data:d}):e))+'" width="96px" /></a></span>\n'},22:function(a,b,c,d){var e;return null!=(e=b.unless.call(a,null!=a?a.replied_to_id:a,{name:"unless",hash:{},fn:this.program(23,d,0),inverse:this.noop,data:d}))?e:""},23:function(a,b,c,d){var e;return"                    "+this.escapeExpression((e=null!=(e=b.update_count||(null!=a?a.update_count:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"update_count",hash:{},data:d}):e))+"\n"},25:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return"in <a "+h((e=null!=(e=b.link_helper||(null!=a?a.link_helper:a))?e:f,typeof e===g?e.call(a,{name:"link_helper",hash:{},data:d}):e))+'="'+h((e=null!=(e=b.group_url||(null!=a?a.group_url:a))?e:f,typeof e===g?e.call(a,{name:"group_url",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.group_name||(null!=a?a.group_name:a))?e:f,typeof e===g?e.call(a,{name:"group_name",hash:{},data:d}):e))},27:function(a,b,c,d){var e;return'                <div class="likedby">\n                    '+this.escapeExpression((e=null!=(e=b.like_count||(null!=a?a.like_count:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"like_count",hash:{},data:d}):e))+" this post.\n                </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return null!=(e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:""},useData:!0}),this.Yt.Templates.tile=Handlebars.template({1:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'    <div class="'+(null!=(e=b.unless.call(a,null!=a?a.replied_to_id:a,{name:"unless",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+" "+(null!=(e=b["if"].call(a,null!=a?a.replied_to_id:a,{name:"if",hash:{},fn:this.program(4,d,0),inverse:this.noop,data:d}))?e:"")+'" id="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:g,typeof f===h?f.call(a,{name:"id",hash:{},data:d}):f))+'">\n        <div class="meta clr">\n            <div class="userimg">\n                <img src="'+i((f=null!=(f=b.mugshot_url||(null!=a?a.mugshot_url:a))?f:g,typeof f===h?f.call(a,{name:"mugshot_url",hash:{},data:d}):f))+'" height="96" width="96" />\n            </div>\n            <div class="metadata">\n                <a '+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="https://www.yammer.com/'+i((f=null!=(f=b.user_network_helper||(null!=a?a.user_network_helper:a))?f:g,typeof f===h?f.call(a,{name:"user_network_helper",hash:{},data:d}):f))+"/users/"+i((f=null!=(f=b.username||(null!=a?a.username:a))?f:g,typeof f===h?f.call(a,{name:"username",hash:{},data:d}):f))+'" class="author">\n                    '+i((f=null!=(f=b.full_name||(null!=a?a.full_name:a))?f:g,typeof f===h?f.call(a,{name:"full_name",hash:{},data:d}):f))+"\n                </a>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.replied_to_id:a,{name:"if",hash:{},fn:this.program(6,d,0),inverse:this.noop,data:d}))?e:"")+"\n"+(null!=(e=b["if"].call(a,null!=a?a.group_url:a,{name:"if",hash:{},fn:this.program(8,d,0),inverse:this.noop,data:d}))?e:"")+"\n                <a "+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="'+i((f=null!=(f=b.web_url||(null!=a?a.web_url:a))?f:g,typeof f===h?f.call(a,{name:"web_url",hash:{},data:d}):f))+'" target="_blank" class="creationdate unformatted" data-time="'+i((f=null!=(f=b.created_at||(null!=a?a.created_at:a))?f:g,typeof f===h?f.call(a,{name:"created_at",hash:{},data:d}):f))+'">\n                    '+i((f=null!=(f=b.created_at||(null!=a?a.created_at:a))?f:g,typeof f===h?f.call(a,{name:"created_at",hash:{},data:d}):f))+'\n                </a>\n            </div>\n        </div>\n\n        <div class="content">\n            <div class="message">\n                <span class="messagebody">'+(null!=(e=this.lambda(null!=(e=null!=a?a.body:a)?e.rich:e,a))?e:"")+"\n"+(null!=(e=b.each.call(a,null!=a?a.attachments:a,{name:"each",hash:{},fn:this.program(10,d,0),inverse:this.noop,data:d}))?e:"")+"                </span>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.attachments:a,{name:"if",hash:{},fn:this.program(15,d,0),inverse:this.noop,data:d}))?e:"")+"            </div>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.thread_id:a,{name:"if",hash:{},fn:this.program(24,d,0),inverse:this.noop,data:d}))?e:"")+"\n"+(null!=(e=b["if"].call(a,null!=(e=null!=a?a.liked_by:a)?e.count:e,{name:"if",hash:{},fn:this.program(27,d,0),inverse:this.noop,data:d}))?e:"")+"        </div>\n    </div>\n"},2:function(a,b,c,d){return"yam"},4:function(a,b,c,d){return"yam reply"},6:function(a,b,c,d){var e;return'                    <span class="in_reply_to"> in reply to '+this.escapeExpression((e=null!=(e=b.in_reply_to||(null!=a?a.in_reply_to:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"in_reply_to",hash:{},data:d}):e))+"</span>\n"},8:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                    <span class="messageinfo">Posted in <a '+h((e=null!=(e=b.link_helper||(null!=a?a.link_helper:a))?e:f,typeof e===g?e.call(a,{name:"link_helper",hash:{},data:d}):e))+'="'+h((e=null!=(e=b.group_url||(null!=a?a.group_url:a))?e:f,typeof e===g?e.call(a,{name:"group_url",hash:{},data:d}):e))+'">'+h(this.lambda(null!=a?a.group_name:a,a))+"</a></span>\n"},10:function(a,b,c,d){var e;return(null!=(e=b["if"].call(a,null!=a?a.body:a,{name:"if",hash:{},fn:this.program(11,d,0),inverse:this.noop,data:d}))?e:"")+(null!=(e=b["if"].call(a,null!=a?a.praised_user_ids:a,{name:"if",hash:{},fn:this.program(13,d,0),inverse:this.noop,data:d}))?e:"")},11:function(a,b,c,d){var e;return'                            <span class="repost">'+(null!=(e=this.lambda(null!=(e=null!=a?a.body:a)?e.plain:e,a))?e:"")+"</span>\n"},13:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                            <div class="praised">\n                                <span>'+h((e=null!=(e=b.description||(null!=a?a.description:a))?e:f,typeof e===g?e.call(a,{name:"description",hash:{},data:d}):e))+'</span>\n                                <span class="praise '+h((e=null!=(e=b.icon||(null!=a?a.icon:a))?e:f,typeof e===g?e.call(a,{name:"icon",hash:{},data:d}):e))+'"><em>'+h((e=null!=(e=b.comment||(null!=a?a.comment:a))?e:f,typeof e===g?e.call(a,{name:"comment",hash:{},data:d}):e))+"</em></span>\n                            </div>\n"},15:function(a,b,c,d){var e;return'                    <div class="attachments">\n'+(null!=(e=b.each.call(a,null!=a?a.attachments:a,{name:"each",hash:{},fn:this.program(16,d,0),inverse:this.noop,data:d}))?e:"")+"                    </div>\n"},16:function(a,b,c,d){var e;return(null!=(e=b["if"].call(a,null!=a?a.image:a,{name:"if",hash:{},fn:this.program(17,d,0),inverse:this.noop,data:d}))?e:"")+"\n"+(null!=(e=b["if"].call(a,null!=a?a.file:a,{name:"if",hash:{},fn:this.program(19,d,0),inverse:this.noop,data:d}))?e:"")+"\n"+(null!=(e=b["if"].call(a,null!=a?a.ymodule:a,{name:"if",hash:{},fn:this.program(21,d,0),inverse:this.noop,data:d}))?e:"")},17:function(a,b,c,d){var e;return'                                <img class="attachment" src="'+this.escapeExpression(this.lambda(null!=(e=null!=a?a.image:a)?e.url:e,a))+'">\n'},19:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'                                <div class="document clr">\n                                    <span class="item"><a '+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="'+i(this.lambda(null!=(e=null!=a?a.file:a)?e.url:e,a))+'"><img src="'+i((f=null!=(f=b.large_icon_url||(null!=a?a.large_icon_url:a))?f:g,typeof f===h?f.call(a,{name:"large_icon_url",hash:{},data:d}):f))+'" /><span class="download">Download</span></a></span>\n                                    <span class="name">'+i((f=null!=(f=b.full_name||(null!=a?a.full_name:a))?f:g,typeof f===h?f.call(a,{name:"full_name",hash:{},data:d}):f))+"</span>\n                                </div>\n"},21:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'                                <div class="document clr">\n'+(null!=(e=b["if"].call(a,null!=a?a.thumbnail_url:a,{name:"if",hash:{},fn:this.program(22,d,0),inverse:this.noop,data:d}))?e:"")+'                                    <span class="name clr"><a href="'+i((f=null!=(f=b.web_url||(null!=a?a.web_url:a))?f:g,typeof f===h?f.call(a,{name:"web_url",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+"</a></span>\n                                </div>\n"},22:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                                    <span class="item clr"><a href="'+h((e=null!=(e=b.web_url||(null!=a?a.web_url:a))?e:f,typeof e===g?e.call(a,{name:"web_url",hash:{},data:d}):e))+'"><img src="'+h((e=null!=(e=b.thumbnail_url||(null!=a?a.thumbnail_url:a))?e:f,typeof e===g?e.call(a,{name:"thumbnail_url",hash:{},data:d}):e))+'" width="96px" /></a></span>\n'},24:function(a,b,c,d){var e;return null!=(e=b.unless.call(a,null!=a?a.replied_to_id:a,{name:"unless",hash:{},fn:this.program(25,d,0),inverse:this.noop,data:d}))?e:""},25:function(a,b,c,d){var e;return"                    "+this.escapeExpression((e=null!=(e=b.update_count||(null!=a?a.update_count:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"update_count",hash:{},data:d}):e))+"\n"},27:function(a,b,c,d){var e;return'                <div class="likedby">\n                    '+this.escapeExpression((e=null!=(e=b.like_count||(null!=a?a.like_count:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"like_count",hash:{},data:d}):e))+" this post.\n                </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return null!=(e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:""},useData:!0});
/*! constants.js | Yammertime */
var Yt=Yt||{};Yt.Constants=Yt.Constants||{},function(a){a.classes={hidden:"hidden",largeText:" large text ",largeTile:"large",mediumText:" medium text ",mediumTile:"medium",noScroll:"no-scroll",noScrollbar:"no-scrollbar",pushSettings:"push_3",replies:"replies",replyNumber:"reply-number",smallText:" small text ",smallTile:"small",tile:"tile",tiled_view:"tiled-view",viewReplies:"view-replies",xlargeText:" xlarge text "},a.defaultConfig={accessTokens:{},animationDelay:1e4,cookie:"networkPermalink",count:3e3,idleWait:5,lastMessageId:0,lastMessageTime:"",loadDelay:15e3,messageLimit:20,oldLastMessageId:0,showDelay:3e3,textSize:"medium",updateCount:0},a.settingKeys={appendPostReplies:"appendPostReplies",bgColor:"bgColor",fullName:"fullName",groupId:"groupId",logoUrl:"logoUrl",modalPostAppend:"modalPostAppend",networkPermalink:"networkPermalink",networkId:"networkId",noDefaults:"noDefaults",olderReplies:"olderReplies",postId:"postId",postRotation:"postRotation",showSticky:"showSticky",sticky:"sticky",stickyDate:"stickyDate",textSize:"textSize",tiled:"tiled",topicId:"topicId",topicName:"topicName",truncate:"truncate",yammerLinks:"yammerLinks"}}(Yt.Constants);
/*! utilities.js | Yammertime */
var Yt=Yt||{};Yt.Util=Yt.Util||{},function(a,b,c,d,e){var f=Yt.Constants.classes;a.addTrim=function(){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},a.addOptions=function(a,c,d,e){a.empty(),b.each(c,function(b,c){a.get(0).options.add(new Option(c[d],c[e]))})},a.isInt=function(a){var b=parseInt(a);return isNaN(b)?!1:a==b&&a.toString()==b.toString()},a.isUrl=function(a){var b=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)},a.getElements=function(){return{body:b("body"),closeButton:b(".close-button"),container:b(".container"),cancelButton:b('.settings button[name="cancel"]'),feed:b(".feed"),header:b(".header"),headerLogo:b(".header-logo"),landing:b(".landing"),logout:b("#logout"),mainContent:b(".main"),overlay:b(".overlay"),overlayExpanded:b(".expanded.modal"),postExpanded:b(".post-expanded"),repliesExpanded:b(".replies-expanded"),settings:b("#settings"),settingsDialog:b(".settings"),settingsForm:b(".settings form"),settingsInputs:b('.settings form :input[name!="color"][name!="logoUrl"][name!="text-size"][name!="post-rotation"]'),spinner:b("#spinner"),sticky:b(".sticky"),tile:b(".tile"),viewReplies:b(".view-replies"),color:b('.settings input[name="color"]'),group:b('.settings select[name="group"]'),logoUrl:b('.settings input[name="logoUrl"]'),network:b('.settings select[name="network"]'),postRotation:b('.settings input[name="post-rotation"]'),remove:b('.settings input[name="remove"]'),showSticky:b('.settings input[name="show-sticky"]'),submitButton:b('.settings button[name="submit"]'),textSize:b('.settings select[name="text-size"]'),tiled:b('.settings input[name="tiled"]'),topic:b('.settings input[name="topic"]'),truncate:b('.settings input[name="truncate"]'),yammerLinks:b('.settings input[name="yammer-links"]')}},a.toggleScroll=function(){b("body").toggleClass(f.noScroll).toggleClass(f.noScrollbar)},a.requestErrorHandler=function(a){console&&console.log&&console.log("An error has occured:",a)},a.addTrim()}(Yt.Util,jQuery,window,document);
/*! feed.js | Yammertime */
var Yt=Yt||{};Yt.Feed=Yt.Feed||{},function(a,b,c,d){var e=Yt.Util;a.getOrCreateTopicId=function(a,b,c){yam.platform.request({url:"https://api.yammer.com/api/v1/topics",type:"POST",data:"name="+a,success:b,error:c})},a.loadGroups=function(a){yam.platform.request({url:"https://api.yammer.com/api/v1/groups?mine=1",type:"GET",success:a,error:e.requestErrorHandler})},a.loadMessages=function(a,b){yam.platform.request({url:"https://api.yammer.com"+a,type:"GET",success:b,error:e.requestErrorHandler})},a.loadNetworks=function(a){yam.platform.request({url:"https://api.yammer.com/api/v1/networks/current",type:"GET",success:a,error:e.requestErrorHandler})},a.loadTokens=function(a){yam.platform.request({url:"https://api.yammer.com/api/v1/oauth/tokens",type:"GET",success:function(b){$.each(b,function(b,c){a.accessTokens[c.network_permalink]||(a.accessTokens[c.network_permalink]=c)})},error:e.requestErrorHandler})}}(Yt.Feed,window,document,void 0);
/*! settings.js | Yammertime */
var Yt=Yt||{};Yt.Settings=Yt.Settings||{},function(a){function b(a){a.preventDefault(),p.toggleScroll(),q.settingsDialog.toggleClass(r.hidden),q.overlay.toggleClass(r.hidden)}function c(){var a="disabled";"-1"!==q.group.val()?q.topic.attr(a,a):q.topic.removeAttr(a)}function d(){yam.platform.setAuthToken(s.accessTokens[q.network.val()].token),o.loadGroups(a.addGroups)}function e(){q.settingsForm.data("changed","true")}function f(a){p.requestErrorHandler(a),retrieveFeed()}function g(){var b=a.get(t.bgColor);b&&q.body.css("background",b)}function h(){var b=a.get(t.logoUrl),c="src";p.isUrl(b)?q.headerLogo.attr(c,b):q.headerLogo.attr(c,"images/yammertime.png")}function i(){var b=a.get(t.textSize);"small"===b?q.feed.removeClass(r.mediumText+r.largeText+r.xlargeText).addClass(r.smallText):"medium"===b?q.feed.removeClass(r.smallText+r.largeText+r.xlargeText).addClass(r.mediumText):"large"===b?q.feed.removeClass(r.smallText+r.medium+r.xlarge).addClass(r.large):"xlarge"===b&&q.feed.removeClass(r.smallText+r.mediumText+r.largeText).addClass(r.xlargeText),a.get(t.tiled)&&q.feed.trigger("tilePosts")}function j(){q.settingsForm.data("changed","false");var b=a.get(t.groupId);q.network.val(a.get(t.networkId)),q.logoUrl.val(a.get(t.logoUrl)),q.color.val(a.get(t.bgColor)),q.topic.val(a.get(t.topicName)),q.textSize.val(a.get(t.textSize)||s.textSize),b&&p.isInt(b)&&q.group.val(b);var d={remove:"remove",postRotation:"postRotation",showSticky:"showSticky",truncate:"truncate",tiled:"tiled",yammerLinks:"yammerLinks"};l(d),c(),p.toggleScroll(),q.settingsDialog.toggleClass(r.hidden),q.overlay.toggleClass(r.hidden)}function k(b){b.preventDefault(),q.settingsDialog.toggleClass(r.hidden),q.overlay.toggleClass(r.hidden);var c={bgColor:q.color.val(),groupId:q.group.val(),logoUrl:q.logoUrl.val(),networkId:q.network.val(),noDefaults:!0,postRotation:q.postRotation.is(":checked"),remove:q.remove.is(":checked"),showSticky:q.showSticky.is(":checked"),textSize:q.textSize.val(),truncate:q.truncate.is(":checked"),tiled:q.tiled.is(":checked"),yammerLinks:q.yammerLinks.is(":checked")};a.set(c),a.initStyleSettings(),p.toggleScroll(),q.topic.val()?"true"===q.settingsForm.data("changed")&&o.getOrCreateTopicId(q.topic.val(),m,f):(a.set(t.topicId,""),a.set(t.topicName,""),"true"===q.settingsForm.data("changed")&&q.feed.trigger("retrieveFeed"))}function l(b,c){var d="undefined"!=typeof arguments[1]?"":arguments[0];if(d)for(var e in d)d.hasOwnProperty(e)&&a.get(e)&&q[d[e]].attr("checked","true");else a.get(b)&&q[c].attr("checked","true");a.get(t.tiled)?q.postRotation.attr("disabled","disabled"):q.postRotation.removeAttr("disabled")}function m(b){var c={topicName:b.name,topicId:b.id};a.set(c),q.feed.trigger("retrieveFeed")}var n=Yt.Constants,o=Yt.Feed,p=Yt.Util,q=p.getElements(),r=n.classes,s=n.defaultConfig,t=n.settingKeys;a.oauth={},a.addNetworks=function(a){p.addOptions(q.network,a,"name","permalink")},a.addGroups=function(a){p.addOptions(q.group,a,"full_name","id"),q.group.prepend('<option value="-1">All groups</option>')},a.bindEvents=function(){q.settings.on("click",j),q.cancelButton.on("click",b),q.submitButton.on("click",k),q.network.on("change",d),q.group.on("change",c),q.settingsInputs.on("change",e)},a.get=function(a){return"true"===localStorage[a]?!0:"false"===localStorage[a]?!1:localStorage[a]},a.set=function(a,b){var c="undefined"!=typeof arguments[1]?"":arguments[0];if(c)for(var d in c)c.hasOwnProperty(d)&&(localStorage[d]=c[d]);else localStorage[a]=b},a.initStyleSettings=function(){g(),h(),i()}}(Yt.Settings);
/*! template_helpers.js | Yammertime */
!function(a){var b=Yt.Constants.classes,c=Yt.Constants.settingKeys,d=Yt.Settings;a.registerHelper("like_count",function(){if(this.liked_by.count>1){for(var b="",c=this.liked_by.names.length,d=0;c>d;d++)c-1>d?(b+=this.liked_by.names[d].full_name,b+=d===c-2&&this.liked_by.count<4?" ":", "):b+=this.liked_by.count>3?this.liked_by.names[d].full_name+" ":"and "+this.liked_by.names[d].full_name;return this.liked_by.count>3&&(b+="and "+(this.liked_by.count-3).toString(),b+=this.liked_by.count-3===1?" other":" others"),new a.SafeString(b+" like")}return new a.SafeString(this.liked_by.names[0].full_name+" likes")}),a.registerHelper("link_helper",function(){var b=d.get(c.yammerLinks);return b?new a.SafeString("id"):new a.SafeString("href")}),a.registerHelper("update_count",function(){var c=parseInt(this.thread_stats.updates)-1,d='<div class="'+b.replies+'">';return c>1?new a.SafeString(d+'<a href="#'+this.thread_id+'" class="'+b.viewReplies+'"><span class="'+b.replyNumber+'">'+c+"</span> <span>replies</span></a></div>"):1===c?new a.SafeString(d+'<a href="#'+this.thread_id+'" class="'+b.viewReplies+'"><span class="'+b.replyNumber+'">1</span> <span>reply</span></a></div>'):void 0}),a.registerHelper("user_network_helper",function(){var b=d.get(c.networkId);return new a.SafeString(b)})}(Handlebars);
/*! main.js | Yammertime */
!function(a,b,c,d,e,f){function g(){K.bindEvents(),M.closeButton.on("click",h),M.container.on("click","a.view-replies",A),M.container.on("click","a.older-replies",v),M.logout.on("click",p),M.feed.on("click","."+N.tile,i),M.feed.on("tilePosts",C),M.feed.on("retrieveFeed",w),a(e).on("keyup",n),m()}function h(){M.settingsDialog.addClass(N.hidden),M.overlayExpanded.addClass(N.hidden),M.overlay.addClass(N.hidden),I.toggleScroll(),M.repliesExpanded.html(""),M.repliesExpanded.html(M.spinner.show())}function i(){var b=a(this).attr("id");M.overlayExpanded.toggleClass(N.hidden),M.overlay.toggleClass(N.hidden),M.postExpanded.html(""),M.postExpanded.attr("id",b).html(a(this).html()),z(b),I.toggleScroll()}function j(){a(".creationdate").each(function(){var c=a(this).data("time"),d=b(c).fromNow(),e=" "+d;a(this).text(e)})}function k(a){K.get(P.tiled)?C():(M.container.removeClass(N.tiled_view),M.settingsDialog.removeClass(N.pushSettings))}function l(){for(var a,b=[],c=d.location.href.slice(d.location.href.indexOf("?")+1).split("&"),e=0;e<c.length;e++)a=c[e].split("="),b.push(a[0]),b[a[0]]=a[1];return b}function m(){function b(){c=0}var c=0,d=a(this);setInterval(function(){c+=1,c===O.idleWait&&(M.body.animate({scrollTop:0}),M.overlayExpanded.hasClass(N.hidden)||h())},6e4);d.mousemove(b),d.keypress(b),d.scroll(b)}function n(a){27!==a.which||M.overlayExpanded.hasClass(N.hidden)||h()}function o(a){M.landing.addClass(N.hidden),M.header.removeClass(N.hidden),g(),K.set(P.networkPermalink,a.access_token.network_permalink);K.get(P.networkPermalink);K.set(P.networkId,a.access_token.network_name),J.loadTokens(O),J.loadNetworks(K.addNetworks),J.loadGroups(K.addGroups);var b=l(),c={bgColor:"#455560",groupId:"-1",olderReplies:"false",logoUrl:"",postRotation:"false",showSticky:"false",stickyDate:0,textSize:"small",truncate:"false",tiled:"true",yammerLinks:"false"};if(K.get(P.noDefaults)||b[b[0]]){if(b[b[0]]){for(var d=0;d<b.length;d++)c[b[d]]=b[b[d]];K.set(c)}}else K.set(c);K.initStyleSettings(),w(),setInterval(D,O.showDelay),setInterval(y,O.animationDelay)}function p(){yam.logout(function(a){location.reload()})}function q(a){var c=[];if(K.get(P.showSticky)){for(var d=0;d<a.length;d++)"announcement"===a[d].message_type&&(c.push(a[d]),a.splice(d,1),d--);c.length>0?(stickyDate=b(c[0].created_at).format("X"),stickyDate>=K.get(P.stickyDate)&&(c='<p datetime="'+c[0].created_at+'">'+c[0].body.plain+"</p>",K.set(P.sticky,c),K.set(P.stickyDate,stickyDate),t())):K.get(P.sticky)&&t()}else K.set(P.stickyDate,0),M.sticky.addClass(N.hidden);return a}function r(a){var b={},c={},d=K.get(P.yammerLinks);for(var e in a.references)if(a.references.hasOwnProperty(e)){var f=a.references[e];"user"===f.type?(b[f.id]=f,b[f.name]=f):"message"===f.type?c[f.id]=f:"group"===f.type?b[f.id]=f:"thread"===f.type&&(b[f.id]=f)}for(e in a.messages)if(a.messages.hasOwnProperty(e)){var g=a.messages[e];if(g.sender_id&&(g.mugshot_url=b[g.sender_id].mugshot_url.replace("48x48","96x96"),g.full_name=b[g.sender_id].full_name,g.username=b[g.sender_id].name),g.thread_id&&(g.thread_stats=b[g.thread_id].stats),"-1"===K.get(P.groupId)&&g.group_id&&(g.group_name=b[g.group_id].full_name,g.group_url=b[g.group_id].web_url),0===g.body.rich.indexOf("(See attached"))for(var h in g.attachments)if(g.attachments.hasOwnProperty(h)){var i=g.attachments[h];i.ymodule&&(g.body.rich=i.name)}g.body.rich=g.body.rich.replace(/br><br/g,"br"),d&&(g.body.rich=g.body.rich.replace("href='https://www.yammer.com","'"),g.body.rich=g.body.rich.replace('href="https://www.yammer.com','"')),g.replied_to_id&&(c[g.replied_to_id]?c[g.replied_to_id].sender_id&&(in_reply_to=b[c[g.replied_to_id].sender_id],g.in_reply_to=in_reply_to.full_name):g.replied_to_id=null)}return a.messages}function s(a){var b=r(a),c=b.length;c>0&&(b=q(b),b=B(b),u(b),j(),k(b))}function t(){b().format("X")-K.get(P.stickyDate)<604800?(M.sticky.html(sticky),M.sticky.removeClass(N.hidden)):(K.set(P.sticky,""),K.set(P.stickyDate,""),M.sticky.addClass(N.hidden),M.sticky.html(""))}function u(b){var c,d,e,f,g,h=K.get(P.postId)||"",i=b.length,j=K.get(P.olderReplies);if(e=i>0?b[0].thread_stats.updates:!1,f=K.get(P.tiled)?L.tile:L.message,g=f(b),g=Array.prototype.slice.call(a(g)),g=g.reverse(),h.length>0){if(d=K.get(P.modalPostAppend)?M.repliesExpanded:a("#"+h),K.get(P.tiled)){var k="",l=function(){var a={thread_id:h,thread_stats:{updates:e}};return F(a),"<h2>"+k+"</h2>"};i>0&&i<=O.messageLimit?(c=1===i?" reply":" replies",k='<span class="num">'+i.toString()+"</span>"+c):k=i===O.messageLimit&&i!==e-1?"Latest replies":"No replies yet :(",d.append(l)}if(a(g).appendTo(d),i===O.messageLimit&&i!==e-1){e=e-O.messageLimit>O.messageLimit?O.messageLimit:e-O.messageLimit-1,c=1===e?" message":" messages";var m='<a href="#" id="'+b[i-1].id+'" class="older-replies">View <span class="num">'+e+'</span> older <span class="sores">'+c+"</span></a>";a(m).insertAfter(d.find("h2"))}M.spinner.hide(),E(i,d),K.set(P.appendPostReplies,"false"),K.set(P.modalPostAppend,"false"),K.set(P.postId,"")}else if(j){var n=parseInt(M.repliesExpanded.find("h2").find(".num").text());a(g).insertAfter(a(".older-replies")),O.updateCount<O.messageLimit&&(O.updateCount=O.messageLimit),e-O.updateCount-1<=O.messageLimit?(a(".older-replies").remove(),O.updateCount=O.messageLimit):(a(".older-replies").attr("id",b[i-1].id),O.updateCount+=i,e-O.updateCount===2&&(a(".older-replies").find(".sores").text("message"),a(".older-replies").find(".num").text("1"))),M.repliesExpanded.find("h2").find(".num").text(n+i),K.set(P.olderReplies,"false")}else g=g.reverse(),a(g).prependTo(M.feed),O.oldLastMessageId=O.lastMessageId,E(i)}function v(b){b.preventDefault();var c=a(this).attr("id"),d=a(this).parents("section").find(".post-expanded").attr("id");K.set(P.olderReplies,"true"),J.loadMessages("/api/v1/messages/in_thread/"+d+"?older_than="+c+"&limit="+O.messageLimit,s)}function w(){O.lastMessageId=0,O.oldLastMessageId=0,M.feed.html(""),M.sticky.html("");var a=K.get(P.groupId),b=K.get(P.topicId);a&&I.isInt(a)&&-1!=a?J.loadMessages("/api/v1/messages/in_group/"+a+"?threaded=true&limit="+O.messageLimit,s):b&&I.isInt(b)?J.loadMessages("/api/v1/messages/about_topic/"+b+"?threaded=true&limit="+O.messageLimit,s):J.loadMessages("/api/v1/messages?threaded=true&limit="+O.messageLimit,s)}function x(){a(".feed .yam:last").animate({opacity:"0"},500,function(){var b=a(this);b.prependTo(M.feed).css({opacity:"1",display:"none"}).slideDown("slow")})}function y(a){!K.get(P.tiled)&&K.get(P.postRotation)&&x()}function z(a){K.set(P.postId,a),K.set(P.appendPostReplies,"true"),K.set(P.modalPostAppend,"true"),J.loadMessages("/api/v1/messages/in_thread/"+a+"?limit="+O.messageLimit,s)}function A(b){b&&b.preventDefault();var c=a(this);if(c.hasClass(N.viewReplies)&&0===c.parents(".yam").find(".reply").length){var d=c[0].hash.slice(1),e=c.parents(".yam")[0].id;K.set(P.appendPostReplies,"true"),K.set(P.postId,e),J.loadMessages("/api/v1/messages/in_thread/"+d,s)}else c.parents(".yam").find(".reply").toggle(),c.parents(".yam").find(".reply").remove()}function B(b){for(var c=0;c<b.length;c++)if(b[c].id>O.lastMessageId)O.lastMessageId=b[c].id;else if(0!==O.oldLastMessageId&&"true"!==K.get(P.appendPostReplies)){F(b[c]);var d=b[c].id,e=a("#"+d);e.length>0&&(b.splice(c,1),c--)}return b}function C(){var b=a(".feed > div");b.addClass(N.tile),b.each(function(){var b=a(this);if(b.find(".messagebody").first()){var c=a(b.find(".messagebody").first()[0]).text().replace("(less)","").trim();c.length>750?b.addClass(N.largeTile):c.length>500?b.addClass(N.mediumTile):b.addClass(N.smallTile)}}),M.container.addClass(N.tiled_view),a(".feed .yam").length&&(M.feed.masonry("reloadItems"),M.feed.masonry({itemSelector:".tile",gutter:20,columnWidth:355}))}function D(){if(j(),O.count%O.loadDelay===0){var a=K.get(P.groupId),b=K.get(P.topicId);a&&I.isInt(a)&&"-1"!==a?J.loadMessages("/api/v1/messages/in_group/"+a+"?threaded=true&newer_than="+O.lastMessageId,s):b&&I.isInt(b)?J.loadMessages("/api/v1/messages/about_topic/"+b+"?threaded=true&newer_than="+O.lastMessageId,s):J.loadMessages("/api/v1/messages?threaded=true&newer_than="+O.lastMessageId,s)}O.count%O.showDelay===0&&(O.count=O.count+O.showDelay)}function E(b,c){if(K.get(P.truncate)&&!K.get(P.tiled))if(c){var d;d=2===c.find(".message").first().find("span.messagebody").length?2:1;for(var e=d;b+1>e;e++)a(c.find("span.messagebody")[e]).truncate({max_length:275})}else for(var f=M.feed.find("span.messagebody"),g=0;b>g;g++)a(f[g]).truncate({max_length:275})}function F(b){var c=a("#"+b.thread_id.toString()),d=c.find("."+N.replyNumber);if(d.length>0)d.text((b.thread_stats.updates-1).toString()),b.thread_stats.updates>2?d.next().text("replies"):2===b.thread_stats.updates?d.next().text("reply"):d.parents(".replies").remove();else if(2===b.thread_stats.updates){var e='<div class="'+N.replies+'"><a href="#'+b.thread_id+'" class="'+N.viewReplies+'"><span class="'+N.replyNumber+'">1</span> <span>reply</span></a></div>',f=c.find(".message");a(e).insertAfter(f)}}function G(){yam.getLoginStatus(function(a){a.authResponse?o(a):(M.landing.removeClass(N.hidden),yam.connect.loginButton("#yammer-login",function(a){a.authResponse&&o(a)}))})}var H=Yt.Constants,I=Yt.Util,J=Yt.Feed,K=Yt.Settings,L=Yt.Templates,M=(K.oauth,I.getElements()),N=H.classes,O=H.defaultConfig,P=H.settingKeys;G()}(jQuery,moment,Handlebars,window,document);